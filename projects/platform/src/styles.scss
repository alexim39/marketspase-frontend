@use '@angular/material' as mat;
@use './styles/variables' as vars;

// 1. SETUP THEME
// We rely on the automatic palette generation of M3/recent Angular versions
// If you need specific azure/blue colors, we define them in the config directly.

$my-app-theme: mat.define-theme((
  color: (
    theme-type: light, // Start with light
    primary: mat.$azure-palette,
    tertiary: mat.$blue-palette,
  ),
  typography: (
    plain-family: 'Roboto, sans-serif',
  ),
  density: (
    scale: 0,
  )
));

// 2. APPLY THEME
html {
  // Apply the base theme
  @include mat.all-component-themes($my-app-theme);
  
  // NATIVE BROWSER SUPPORT
  color-scheme: light dark;
}

// 3. DARK MODE OVERRIDES
// When data-theme="dark" is present, we override the material system variables
// and our own global variables.
body[data-theme="dark"] {
  // This mixin automatically flips the Material System Colors (surface, on-surface, etc)
  // to dark mode values without needing to redefine the whole palette.
  @include mat.all-component-colors(
    mat.define-theme((
      color: (
        theme-type: dark,
        primary: mat.$azure-palette,
        tertiary: mat.$blue-palette,
      )
    ))
  );
}

body {
  margin: 0;
  font-family: Roboto, "Helvetica Neue", sans-serif;

  // CONNECT TO OUR VARIABLES
  background-color: var(--background-color);
  color: var(--text-primary);
  
  // Transition for smooth toggle
  transition: background-color 0.3s ease, color 0.3s ease;
}

html, body { height: 100%; }

// --- DIALOG STYLES (Unchanged) ---
.confirm-dialog-panel {
  .mat-mdc-dialog-surface {
    background-color: var(--surface-color) !important;
    color: var(--text-primary) !important;
    border-radius: 16px !important;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2) !important;
  }
}

.mat-mdc-dialog-backdrop {
  background: rgba(0, 0, 0, 0.5) !important;
}

.mat-mdc-dialog-container {
  padding: 0 !important;
  animation: dialogEnter 0.2s ease-out;
}

@keyframes dialogEnter {
  from { opacity: 0; transform: scale(0.9) translateY(-20px); }
  to { opacity: 1; transform: scale(1) translateY(0); }
}