@import '../../../../../styles/variables';
@import '../../../../../styles/mixins';

.metrics-section {
  .section-header {
    @include flex-between;
    margin: $spacing-8 $spacing-4 $spacing-5;
    
    @include tablet {
      margin: $spacing-10 $spacing-6 $spacing-6;
    }
    
    @include desktop {
      margin: $spacing-12 0 $spacing-6;
    }

    .section-title-wrapper {
      .section-title {
        @include heading-small;
        margin: 0;
        color: $text-primary;
        
        @include tablet {
          font-size: $font-size-3xl;
        }
      }
      
      .section-subtitle {
        @include body-small;
        color: $text-secondary;
        font-weight: $font-weight-medium;
        margin-top: $spacing-1;
      }
    }

    .period-selector {
      display: flex;
      background-color: color-mix(in srgb, $background-color, black 5%);
      border: $border-width solid $border-color;
      border-radius: $border-radius-xl;
      padding: $spacing-1;
      
      .period-btn {
        @include button-ghost;
        min-width: 70px;
        padding: $spacing-2 $spacing-4;
        font-size: $font-size-xs;
        font-weight: $font-weight-medium;
        border-radius: $border-radius;
        transition: all $transition-fast;
        background: transparent;
        
        &.active {
          @include button-primary;
          background: $primary-color;
          color: $white;
          box-shadow: $shadow-sm;
          
          &:hover:not(:disabled) {
            background: $primary-dark;
          }
        }
        
        &:not(.active):hover:not(:disabled) {
          @include darken-bg($background-color, 5%);
        }
      }
    }
  }
  
  .metrics-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: $spacing-4;
    
    @include tablet {
      grid-template-columns: repeat(2, 1fr);
    }
    
    @include desktop {
      grid-template-columns: repeat(4, 1fr);
      gap: $spacing-5;
    }
  }
}

.metric-card {
  @include card-base;
  border-radius: $border-radius-xl;
  border: $border-width solid $border-color;
  transition: all $transition-normal;
  overflow: hidden;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: $shadow-lg;
    border-color: transparent;
  }
  
  mat-card-content {
    padding: $spacing-6;
  }
  
  .metric-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: $spacing-5;
    
    .metric-icon {
      width: 48px;
      height: 48px;
      border-radius: $border-radius-xl;
      @include flex-center;
      
      mat-icon {
        font-size: $font-size-2xl;
      }
    }
    
    .metric-trend {
      display: flex;
      align-items: center;
      gap: $spacing-1;
      font-size: $font-size-xs;
      font-weight: $font-weight-semibold;
      padding: $spacing-1 $spacing-2;
      border-radius: $border-radius-xl;
      
      &.up {
        background: rgba($success-color, 0.1);
        color: $success-color;
      }
      
      &.down {
        background: rgba($error-color, 0.1);
        color: $error-color;
      }
      
      .trend-icon {
        font-size: $font-size-base;
        width: 16px;
        height: 16px;
      }
    }
  }
  
  .metric-body {
    .metric-value {
      font-size: $font-size-3xl;
      font-weight: $font-weight-bold;
      color: $text-primary;
      margin: 0 0 $spacing-2 0;
      line-height: $line-height-tight;
    }
    
    .metric-label {
      @include body-medium;
      font-weight: $font-weight-semibold;
      color: $text-primary;
      margin: 0 0 $spacing-1 0;
    }
    
    .metric-subtitle {
      @include caption;
      color: $text-secondary;
      margin: 0;
    }
  }
  
  .metric-footer {
    margin-top: $spacing-4;
    padding-top: $spacing-3;
    border-top: $border-width solid $border-color;
    @include flex-between;
    
    .period-indicator {
      font-size: $font-size-xs;
      color: $text-tertiary;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .positive-trend {
      font-size: $font-size-xs;
      color: $success-color;
      font-weight: $font-weight-semibold;
    }
    
    .negative-trend {
      font-size: $font-size-xs;
      color: $error-color;
      font-weight: $font-weight-semibold;
    }
  }
  
  // Different metric card styles with theme-aware backgrounds
  &.metric-1 {
    .metric-icon {
      background: rgba($primary-color, 0.1);
      
      mat-icon {
        color: $primary-color;
      }
    }
  }
  
  &.metric-2 {
    .metric-icon {
      background: rgba($warning-color, 0.1);
      
      mat-icon {
        color: $warning-color;
      }
    }
  }
  
  &.metric-3 {
    .metric-icon {
      background: rgba($success-color, 0.1);
      
      mat-icon {
        color: $success-color;
      }
    }
  }
  
  &.metric-4 {
    .metric-icon {
      background: rgba(233, 30, 99, 0.1); // Pink accent color
      
      mat-icon {
        color: #e91e63; // Pink color for this specific metric
      }
    }
  }
}

@include mobile {
  .section-header {
    flex-direction: column;
    align-items: flex-start;
    gap: $spacing-4;
  }
  
  .period-selector {
    width: 100%;
    justify-content: center;
    
    .period-btn {
      flex: 1;
      text-align: center;
    }
  }
  
  .metric-card {
    mat-card-content {
      padding: $spacing-5;
    }
    
    .metric-value {
      font-size: $font-size-2xl;
    }
  }
}