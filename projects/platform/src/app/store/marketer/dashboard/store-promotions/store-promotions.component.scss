// components/store-promotions/store-promotions.component.scss
@use '../../../../../styles/mixins' as mixins;
@use '../../../../../styles/variables' as vars;

.store-promotions {
  .promotions-header {
    margin-bottom: vars.$spacing-6;

    .header-content {
      @include mixins.flex-between;
      margin-bottom: vars.$spacing-6;

      @include mixins.mobile {
        flex-direction: column;
        gap: vars.$spacing-4;
      }

      .header-left {
        h2 {
          @include mixins.heading-medium;
          margin: 0 0 vars.$spacing-1 0;
          color: vars.$text-primary;
        }

        p {
          @include mixins.body-medium;
          color: vars.$text-secondary;
          margin: 0;
        }
      }
    }

    .promotion-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: vars.$spacing-4;
      padding: vars.$spacing-4;
      background: vars.$gray-50;
      border-radius: vars.$border-radius-lg;

      .stat-item {
        text-align: center;

        .stat-value {
          @include mixins.heading-medium;
          font-weight: vars.$font-weight-bold;
          display: block;
          color: vars.$text-primary;

          &.primary {
            color: vars.$primary-color;
          }

          &.accent {
            color: vars.$secondary-color;
          }
        }

        .stat-label {
          @include mixins.caption;
          color: vars.$text-secondary;
          display: block;
        }
      }
    }
  }

  .filters-bar {
    margin-bottom: vars.$spacing-6;

    .filter-buttons {
      @include mixins.flex-center;
      gap: vars.$spacing-1;
      background: vars.$gray-50;
      padding: vars.$spacing-1;
      border-radius: vars.$border-radius;
      width: fit-content;

      button {
        border-radius: vars.$border-radius-sm;
        font-weight: vars.$font-weight-medium;

        &.active {
          background: vars.$white;
          box-shadow: vars.$shadow-sm;
        }
      }
    }
  }

  .promotions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
    gap: vars.$spacing-4;

    @include mixins.mobile {
      grid-template-columns: 1fr;
    }
  }

  .promotion-card {
    @include mixins.card-base;
    @include mixins.card-hover;

    .promotion-header {
      @include mixins.flex-between;
      width: 100%;

      .promotion-title {
        @include mixins.flex-center;
        gap: vars.$spacing-3;

        h3 {
          @include mixins.body-large;
          font-weight: vars.$font-weight-semibold;
          margin: 0;
          color: vars.$text-primary;
          @include mixins.text-ellipsis;
        }
      }
    }

    .promotion-description {
      @include mixins.body-medium;
      color: vars.$text-secondary;
      margin: 0 0 vars.$spacing-4 0;
      line-height: vars.$line-height-normal;
    }

    .promotion-meta {
      @include mixins.flex-center;
      gap: vars.$spacing-4;
      margin-bottom: vars.$spacing-4;
      flex-wrap: wrap;

      .meta-item {
        @include mixins.flex-center;
        gap: vars.$spacing-1;
        color: vars.$text-tertiary;

        mat-icon {
          font-size: 16px;
          width: 16px;
          height: 16px;
        }

        span {
          @include mixins.caption;
        }
      }
    }

    .budget-section {
      margin-bottom: vars.$spacing-4;

      .budget-header {
        @include mixins.flex-between;
        margin-bottom: vars.$spacing-1;

        .budget-label {
          @include mixins.body-small;
          font-weight: vars.$font-weight-medium;
          color: vars.$text-primary;
        }

        .budget-amount {
          @include mixins.caption;
          color: vars.$text-secondary;
        }
      }
    }

    .performance-stats {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: vars.$spacing-3;
      margin-bottom: vars.$spacing-4;

      .performance-item {
        text-align: center;
        padding: vars.$spacing-2;
        background: vars.$gray-50;
        border-radius: vars.$border-radius;

        .label {
          @include mixins.caption;
          color: vars.$text-secondary;
          display: block;
          margin-bottom: vars.$spacing-1;
        }

        .value {
          @include mixins.body-small;
          font-weight: vars.$font-weight-semibold;
          color: vars.$text-primary;
          display: block;

          &.positive {
            color: vars.$success-color;
          }

          &.negative {
            color: vars.$error-color;
          }
        }
      }
    }
  }

  .empty-state {
    @include mixins.flex-column-center;
    grid-column: 1 / -1;
    padding: vars.$spacing-16 vars.$spacing-8;
    text-align: center;
    color: vars.$text-secondary;

    .empty-icon {
      font-size: 64px;
      width: 64px;
      height: 64px;
      color: vars.$gray-400;
      margin-bottom: vars.$spacing-4;
    }

    h3 {
      @include mixins.heading-small;
      margin: 0 0 vars.$spacing-2 0;
      color: vars.$text-primary;
    }

    p {
      @include mixins.body-medium;
      margin: 0 0 vars.$spacing-6 0;
      max-width: 400px;
    }

    .requirements {
      margin-top: vars.$spacing-6;
      text-align: left;

      .requirements-title {
        @include mixins.body-small;
        font-weight: vars.$font-weight-medium;
        color: vars.$text-primary;
        margin: 0 0 vars.$spacing-2 0;
      }

      ul {
        list-style: none;
        padding: 0;
        margin: 0;

        li {
          @include mixins.flex-center;
          gap: vars.$spacing-2;
          padding: vars.$spacing-1 0;
          color: vars.$text-secondary;

          &.met {
            color: vars.$success-color;

            mat-icon {
              color: vars.$success-color;
            }
          }

          mat-icon {
            font-size: 16px;
            width: 16px;
            height: 16px;
          }

          span {
            @include mixins.body-small;
          }
        }
      }
    }
  }
}

// Responsive design
@include mixins.mobile {
  .store-promotions {
    .promotions-grid {
      grid-template-columns: 1fr !important;
    }

    .promotion-stats {
      grid-template-columns: repeat(2, 1fr) !important;
    }

    .performance-stats {
      grid-template-columns: 1fr !important;
    }
  }
}

// Loading state
:host {
  ::ng-deep .mat-progress-bar {
    border-radius: vars.$border-radius-full;
  }
}