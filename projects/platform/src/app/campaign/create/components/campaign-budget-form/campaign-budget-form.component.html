<mat-card class="form-card">
  <mat-card-header>
    <mat-card-title>Campaign Budget</mat-card-title>
    <mat-card-subtitle>
      Set the total amount you want to spend on this campaign.
    </mat-card-subtitle>
  </mat-card-header>
  <mat-card-content>
    <form [formGroup]="formGroup" class="budget-form">
      <div class="wallet-balance-info">
        <span>Wallet Balance:</span>
        <span class="balance-value">{{walletBalance | currency: '₦':'symbol':'1.2-2'}}</span>
      </div>
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Total Campaign Budget</mat-label>
        <span matTextPrefix>₦&nbsp;</span>
        <input matInput type="number" formControlName="budget" placeholder="e.g., 5000">
        @if (formGroup.get('budget')?.errors?.['required']) {
          <mat-error>
            Budget is required.
          </mat-error>
        }
        @if (formGroup.get('budget')?.errors?.['min']) {
          <mat-error>
            Minimum budget is ₦500.
          </mat-error>
        }
        @if (formGroup.get('budget')?.errors?.['max']) {
          <mat-error>
            Maximum budget is ₦1,000,000.
          </mat-error>
        }
      </mat-form-field>
      <div class="slider-info">
        <span class="estimated-reach">Estimated Reach: ~{{estimatedReach | shortNumber}} views</span>
      </div>

      <mat-divider class="form-divider"/>

      <mat-slide-toggle formControlName="enableTarget">
        {{ formGroup.get('enableTarget')?.value ? 'Show Ads to people in my area' : 'Show Ads everywhere' }}
      </mat-slide-toggle>

      @if (walletBalance < formGroup.get('budget')?.value) {
        <div class="insufficient-funds-alert">
          <mat-icon class="alert-icon">account_balance_wallet</mat-icon>
          <div class="alert-content">
            <p class="alert-text">Insufficient wallet balance to cover this campaign budget.</p>
            <br>
            <button mat-flat-button color="primary" (click)="fundWallet.emit()">
              <mat-icon>add</mat-icon>
              Fund Wallet
            </button>
          </div>
        </div>
      }
    </form>
  </mat-card-content>
</mat-card>